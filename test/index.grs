<template>
  <div>
    <div @click="e => this.setState({show: !show})">点击</div>
    <div styleName="test-block">add</div>
    <Child
      v-for="val of arr"
      v-if="show"
      v-text="val"
      v-transition="'slide-fade'"
      v-beforeEnter="this.beforeEnter"
      v-afterEnter="this.afterEnter.bind(this)"
      v-beforeLeave = "this.beforeLeave.bind(this)"/>

    <Child  v-text="121" v-show="show" v-transition="'slide-fade'" />
    <div v-show="show" v-transition="'slide-fade'">test</div>
  </div>
</template>

<script>
import Grass, { CSSModules } from '../src'
import Child from './child'
import style from './style.css'

@CSSModules(style)
class Root extends Grass.Component {
  constructor () {
    super()
    this.state = {
      api: 'index',
      arr: [1, 2],
      show: true,
      obj: {
        tt: 'chentao',
        ff: 'fangfang'
      }
    }
  }

  callback (api) {
    console.log(1);
    // this.setState({arr: [1, 2, 3, 4]})
  }

  beforeEnter (dom) {
    // console.log(dom);
    // console.log('beforeEnter');
    // return false
  }

  afterEnter () {
    // console.log('afterEnter');
  }

  beforeLeave () {
    // console.log('beforeLeave');
    // return false
  }

  afterLeave (dom) {
    // console.log('afterLeave');
    // console.log(dom);
  }

  component () {
    return { Child }
  }
}


Grass.directive('tt', (dom, val) => {
  console.log(dom, val);
})
Grass.mount(document.getElementById('root'), Root) 
</script>