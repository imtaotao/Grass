# 重构第一步
最核心的问题最混乱的地方是需要对 component 进行重构

### 问题
1. 组件之间的缓存混乱
2. 父子组件之间的更新混乱，没有很好的进行缓存
3. 组件的生命周期需要进行更进一步的优化，尽量保留最核心的生命周期函数
4. 组件逻辑模块实现耦合严重，逻辑不太分明
5. 函数命名需要进一步的规范
6. 还有个实现的问题，组件实例化应该在真实 dom 即将创建的时候才需要实例化，这样在 widget vnode 创建和参与 diff 的过程中，避免了实例化的浪费和组件不同导致的数据不一致等问题
   
### 初步解决思路
1. 我们对组件内部的数据缓存，可以缓存于 widget vdom 内部，便于更好的数据流动
2. 父子组件之间的更新，我们也通过 widget vdom 的 updata 函数进行
3. 生命周期我们需要在组件的生成，销毁以及必要的数据优化上进行考虑
4. 对于实现上的逻辑，可以缓慢重构
5. 函数命名尽量优雅一点
6. 我们在指令编译前，生成预 render 配置前进行实例化
   

# 重构第二步（很遥远的事情了）
1. 现在的指令编译是动态的，每次编译都需要动态执行，后续应该编译为 render 字符串，指令集的模块应该与渲染层完全分开，这样做可以使指令集在预编译阶段得到执行，让在真正线上的代码没有模板编译这一块
2. 对于 eval 的使用，在数据量大的情况下很影响 js 代码的执行效率，我们应该提供可选择的配置参数，让开发者自主选择使用哪种模式，使得组件得以优化

# 重构第三步（更遥远）
1. 应该采用更快的 virtual-dom 来进行 diff (现在的 virtual-dom 采用深度遍历的方式来进行 diff，属于第一代 virtual-dom)

